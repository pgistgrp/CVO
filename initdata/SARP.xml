<?xml version="1.0" encoding="UTF-8"?>
<templates>


    <!-- PGames -->
    
    <pgames>
    
        <pgame name="pgame-sarp.create.bct" title="Create a BCT instance." auto="true">
            <description>
              <![CDATA[<small>Start a new instance of BCT</small>]]>
            </description>
            <taskName>task-sarp.create.bct</taskName>
            <declaration>
                <outs>
                    <var name="bct_id"/>
                </outs>
                <props>
                    <property name="name" value="BCT" />
                    <property name="purpose" value="In order to determine what needs to be improved about our transportation system, we first need to know what the problems are. Therefore, the first task is brainstorming concerns." />
                    <property name="instruction" value="For this task, we are asking you to add concerns to your profile. These concerns will be visible to other participants, and will be used in later sessions to determine how to turn our concerns into suggestions for decision makers. Below, you’ll find a box in which to type your concern. You will be asked to ‘tag’ your concerns, so that others may find your concern more easily. The sidebar to the right of your concerns is your way of seeing what others are writing about. You may navigate by either tags or concerns." />
                </props>
            </declaration>
        </pgame>
        
        <pgame name="pgame-sarp.publish.bct" title="Publish a BCT discussion." auto="true">
            <description>
              <![CDATA[<small>Publish a BCT discussion.</small>]]>
            </description>
            <taskName>task-sarp.publish.bct</taskName>
            <declaration>
                <ins>
                    <var name="bct_id"/>
                </ins>
                <outs>
                    <var name="is_id"/>
                </outs>
                <props>
                    <property name="title" value="Discuss Movements" />
                </props>
            </declaration>
        </pgame>
        
        <pgame name="pgame-sarp.bct" title="Brainstorm concerns" auto="false" access="all">
            <description>
              <![CDATA[<small>Brainstorm transportation concerns with other participants.</small>]]>
            </description>
            <actionName>action-sarp.bct</actionName>
            <declaration>
                <ins>
                    <var name="bctId"/>
                </ins>
            </declaration>
        </pgame>
        
        <pgame name="pgame-sarp.cst" title="Moderator: Concerns synthesis tool" auto="false" access="moderator" revisitable="true">
            <description>
              <![CDATA[<small>Write summaries by categorizing concerns and tags into themes</small>]]>
            </description>
            <actionName>action-sarp.cst</actionName>
            <declaration>
                <ins>
                    <var name="bctId"/>
                </ins>
            </declaration>
        </pgame>
        
        <pgame name="pgame-sarp.publish.theme" title="Publish Themes." auto="true">
            <description>
              <![CDATA[Publish themes.]]>
            </description>
            <taskName>task-sarp.publish.theme</taskName>
            <declaration>
                <ins>
                    <var name="bct_id"/>
                </ins>
                <outs>
                    <var name="is_id"/>
                </outs>
                <props>
                    <property name="title" value="Step 1: Discuss Concerns" />
                </props>
            </declaration>
        </pgame>
        
        <pgame name="pgame-sarp.sd.sarp.bct" title="Discuss Movements" auto="false" access="all" revisitable="true">
            <description>
              <![CDATA[<small>Discuss and evaluate summaries of movements.</small>]]>
            </description>
            <actionName>action-sarp.sd.movements</actionName>
            <declaration>
                <ins>
                    <var name="isid"/>
                </ins>
                <props>
                    <property name="script" value="/scripts/sarp/bct/target.js" />
                    <property name="page" value="/WEB-INF/jsp/sarp/bct/info-strcture.jsp" />
                </props>
            </declaration>
        </pgame>
    
        <pgame name="pgame-sarp.sd.sarp.cst" title="Discuss Movements" auto="false" access="all" revisitable="true">
            <description>
              <![CDATA[<small>Discuss and evaluate summaries of movements.</small>]]>
            </description>
            <actionName>action-sarp.sd.movements</actionName>
            <declaration>
                <ins>
                    <var name="isid"/>
                </ins>
                <props>
                    <property name="script" value="/scripts/sarp/cst/target.js" />
                    <property name="page" value="/WEB-INF/jsp/sarp/cst/info-strcture.jsp" />
                </props>
            </declaration>
        </pgame>
    
        <pgame name="pgame-sarp.sd.sarp.cht" title="Discuss Movements" auto="false" access="all" revisitable="true">
            <description>
              <![CDATA[<small>Discuss and evaluate summaries of movements.</small>]]>
            </description>
            <actionName>action-sarp.sd.movements</actionName>
            <declaration>
                <ins>
                    <var name="isid"/>
                </ins>
                <props>
                    <property name="page" value="/WEB-INF/jsp/sarp/cht/info-strcture.jsp" />
                </props>
            </declaration>
        </pgame>
    
        <pgame name="pgame-sarp.sd.sarp.cst" title="Discuss Movements" auto="false" access="all" revisitable="true">
            <description>
              <![CDATA[<small>Discuss and evaluate summaries of movements.</small>]]>
            </description>
            <actionName>action-sarp.sd.movements</actionName>
            <declaration>
                <ins>
                    <var name="isid"/>
                </ins>
                <props>
                    <property name="page" value="/WEB-INF/jsp/sarp/vtt/info-strcture.jsp" />
                </props>
            </declaration>
        </pgame>
    
    </pgames>
    
    <!-- PMethods -->
    
    <pmethods>
    
        <pmethod name="pmethod-init.situation" access="moderator">
            <declaration>
                <outs>
                    <var name="pmethod.bct_id"/>
                    <var name="pmethod.bct_isid"/>
                </outs>
            </declaration>
            <sequence>
                <pgame name="pgame-sarp.create.bct">
                    <declaration>
                        <outs>
                            <var name="bct_id" ref="pmethod.bct_id"/>
                        </outs>
                    </declaration>
                </pgame>
                <pgame name="pgame-sarp.publish.bct">
                    <declaration>
                        <ins>
                            <var name="bct_id" ref="pmethod.bct_id"/>
                        </ins>
                        <outs>
                            <var name="is_id" ref="pmethod.bct_isid"/>
                        </outs>
                    </declaration>
                </pgame>
            </sequence>
        </pmethod>
        
        <pmethod name="pmethod-sarp.bct" description="Step 1: Brainstorm Concerns Tool">
            <declaration>
                <ins>
                    <var name="pmethod.bct_id"/>
                    <var name="pmethod.bct_isid"/>
                </ins>
            </declaration>
            <sequence>
                <branch>
                    <sequence>
                        <pgame name="pgame-sarp.bct">
                            <declaration>
                                <ins>
                                    <var name="bctId" ref="pmethod.bct_id"/>
                                </ins>
                            </declaration>
                        </pgame>
                    </sequence>
                    <sequence>
                        <pgame name="pgame-sarp.sd.sarp.bct">
                            <declaration>
                                <ins>
                                    <var name="isid" ref="pmethod.bct_isid"/>
                                </ins>
                            </declaration>
                        </pgame>
                    </sequence>
                </branch>
            </sequence>
        </pmethod>
        
        <pmethod name="pmethod-sarp.cst" description="Step 2: Concern Synthesis Tool">
            <declaration>
                <ins>
                    <var name="pmethod.bct_id"/>
                </ins>
                <outs>
                    <var name="pmethod.theme_isid"/>
                </outs>
            </declaration>
            <sequence>
                <repeat>
                    <sequence>
                        <pgame name="pgame-sarp.cst">
                            <declaration>
                                <ins>
                                    <var name="bctId" ref="pmethod.bct_id"/>
                                </ins>
                            </declaration>
                        </pgame>
                        <pgame name="pgame-sarp.publish.theme">
                            <declaration>
                                <ins>
                                    <var name="bct_id" ref="pmethod.bct_id"/>
                                </ins>
                                <outs>
                                    <var name="is_id" ref="pmethod.theme_isid"/>
                                </outs>
                            </declaration>
                        </pgame>
                        <pgame name="pgame-sarp.sd.sarp.cst">
                            <declaration>
                                <ins>
                                    <var name="isid" ref="pmethod.theme_isid"/>
                                </ins>
                            </declaration>
                        </pgame>
                    </sequence>
                </repeat>
            </sequence>
        </pmethod>
        
    </pmethods>
    
    <!-- PMeetings -->
    
    <meetings>
    
        <meeting name="meeting-init.situation" access="moderator" description="Initialize Decision Situation">
            <declaration>
                <outs>
                    <var name="meeting.bct_id"/>
                    <var name="meeting.bct_isid"/>
                </outs>
            </declaration>
            <sequence>
                <pmethod name="pmethod-init.situation">
                    <declaration>
                        <outs>
                            <var name="pmethod.bct_id" ref="meeting.bct_id"/>
                            <var name="pmethod.bct_isid" ref="meeting.bct_isid"/>
                        </outs>
                    </declaration>
                </pmethod>
            </sequence>
        </meeting>
        
        <meeting name="meeting-sarp.bct" description="Step 1: Brainstorm Concerns Tool">
            <declaration>
                <ins>
                    <var name="meeting.bct_id"/>
                    <var name="meeting.bct_isid"/>
                </ins>
            </declaration>
            <sequence>
                <pmethod name="pmethod-sarp.bct">
                    <declaration>
                        <ins>
                            <var name="pmethod.bct_id" ref="meeting.bct_id"/>
                            <var name="pmethod.bct_isid" ref="meeting.bct_isid"/>
                        </ins>
                    </declaration>
                </pmethod>
            </sequence>
        </meeting>
        
        <meeting name="meeting-sarp.cst" description="Step 2: Concern Synthesis Tool">
            <declaration>
                <ins>
                    <var name="meeting.bct_id"/>
                </ins>
                <outs>
                    <var name="meeting.theme_isid"/>
                </outs>
            </declaration>
            <sequence>
                <pmethod name="pmethod-sarp.cst">
                    <declaration>
                        <ins>
                            <var name="pmethod.bct_id" ref="meeting.bct_id"/>
                        </ins>
                        <outs>
                            <var name="pmethod.theme_isid" ref="meeting.theme_isid"/>
                        </outs>
                    </declaration>
                </pmethod>
            </sequence>
        </meeting>
        
    </meetings>
    
    <!-- Situations -->
    
    <situations>
    
        <situation name="SARP" description="SARP">
            <sequence>
                <meeting name="meeting-init.situation">
                    <declaration>
                        <outs>
                            <var name="meeting.bct_id" ref="situation.bct_id"/>
                            <var name="meeting.bct_isid" ref="situation.bct_isid"/>
                        </outs>
                    </declaration>
                </meeting>
                <meeting name="meeting-sarp.bct">
                    <declaration>
                        <ins>
                            <var name="meeting.bct_id" ref="situation.bct_id"/>
                            <var name="meeting.bct_isid" ref="situation.bct_isid"/>
                        </ins>
                    </declaration>
                </meeting>
                <meeting name="meeting-sarp.cst">
                    <declaration>
                        <ins>
                            <var name="meeting.bct_id" ref="situation.bct_id"/>
                        </ins>
                        <outs>
                            <var name="meeting.theme_isid" ref="situation.theme_isid"/>
                        </outs>
                    </declaration>
                </meeting>
            </sequence>
        </situation>
        
    </situations>
    
    
</templates>

