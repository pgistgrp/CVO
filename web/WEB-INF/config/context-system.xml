<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

    
    <bean id="userDAO" parent="baseTransactionProxy">
      <property name="target">
        <bean class="org.pgist.system.UserDAOImpl">
          <property name="sessionFactory">
            <ref bean="sessionFactory" />
          </property>
        </bean>
      </property>
    </bean>
    
    
    <bean id="emailDAO" class="org.pgist.system.EmailDAOImpl">
        <property name="sessionFactory">
           <ref bean="sessionFactory" />
        </property>
    </bean>
    
    
    <bean id="emailService" parent="baseTransactionProxy">
      <property name="target">
        <bean class="org.pgist.system.EmailServiceImpl">
          <property name="emailDAO" ref="emailDAO"/>
        </bean>
      </property>
    </bean>
    
    
    <bean id="emailSender" class="org.pgist.system.EmailSender">
        <property name="emailDAO">
            <ref bean="emailDAO" />
        </property>
        <property name="props">
            <props>
                <prop key="mail.smtp.host">localhost</prop>
                <prop key="mail.transport.protocol">smtp</prop>
                <prop key="mail.smtp.auth">true</prop>
                <prop key="mail.smtp.port">25</prop>
            </props>
        </property>
        <property name="contentType"><value>text/plain; charset=UTF-8</value></property>
        <property name="from"><value>service@pgist.org</value></property>
        <property name="username"><value>service</value></property>
        <property name="password"><value>123456</value></property>
    </bean>
    
    
    <bean id="systemDAO" class="org.pgist.system.SystemDAOImpl">
        <property name="sessionFactory">
            <ref bean="sessionFactory" />
        </property>
    </bean>


    <bean id="systemService" parent="baseTransactionProxy">
        <property name="target">
            <bean class="org.pgist.system.SystemServiceImpl">
                <property name="systemDAO" ref="systemDAO"/>
                <property name="userDAO" ref="userDAO"/>
            </bean>
        </property>
    </bean>


    <bean id="systemAgent" class="org.pgist.system.SystemAgent">
        <property name="systemService" ref="systemService"/>
    </bean>


</beans>

